使用
快速迭代你的量化交易灵感
发明者量化
字数
接上篇内容
本篇我们来一起设计策略程序的加仓
平仓代码
加仓
条件
当后续价格触到浮动止盈线
将中线上移到浮动止盈线
同时根据此时的中线计算新的止损线和浮动止盈线
与此同时
加码一份资金
我们已经在
函数中计算出了
浮动止盈线
数值
计算
以做多为例
设置当前初始线
入场价
按着一定规则
如
止损线
入场价
浮动止盈线和止损线
可以设置
浮动止盈线
中线
中线
止损线
错误的
参数
关于加仓触发的操作大概就是对于
数值的判断
当然还是有一些细节的
我们首先要确定策略程序的状态
策略程序必须是
非
状态
即
为
并且
对于
持多仓状态
和
持空仓状态
处理是需要区别的
另外
由于需求说明上
描述初始可用资金分为
份
所以加仓次数最大不能大于
份
这样我们就需要两个全局变量来控制
第一个
最大加仓次数
命名为
赋值
为
并且在代码中不再对此变量修改
第二个
加仓次数
命名为
初始值为
每当触发加仓
该值自加
代码
加仓
多仓状态
触发浮动止盈线
商品期货交易类库
导出函数
处理交易细节
移动中线
空仓状态
触发浮动止盈线
商品期货交易类库
导出函数
处理交易细节
移动中线
平仓
描述
当后续的价格触发止损线
所有资金平仓出局
同样的平仓的处理也要分为
和
状态
并且一定是非
状态
平仓
平多
平空
可以使用回测测试一把
回测发现基本上不触发加仓操作
看了下代码可能是由于
函数中计算浮动止盈
止损的系数过大
打算用回测系统的参数调优找一下参数
所以程序需要添加
个参数值
为了回测调优
界面添加变量参数
如图
单次回测试了一下
效果不好
基本是
亏钱策略
看了交易日志
发现是止盈止损计算有些问题
调整一下代码
改写后的
函数
计算
以做多为例
设置当前初始线
入场价
按着一定规则
如
止损线
入场价
浮动止盈线和止损线
可以设置
浮动止盈线
中线
中线
止损线
错误的
参数
错误的
参数
对
参数调优
发现只有这几个参数回测的
夏普值
是正数
看来这个公布的策略逻辑不是很靠谱
虽然策略不行
但是本篇的主要目的是如何快速迭代出自己的思路
灵感
这个能力是在量化学习道路上必不可少的
本篇完整代码
参数变量
待填写
标的物合约代码
螺纹钢
合约
目前主力合约
全局变量
待填写
轮询时间
毫秒
毫秒
秒
合约信息
初始账户信息
当前账户信息
入场价
浮动止损
止损线
用于引用
商品期货交易类库
导出函数
生成的对象
功能函数
待填写
主循环函数
入场
以前一日收盘价上下
为上下轨
突破上轨做多一份资金
突破下轨做空一份资金
开仓
触发
上轨
当前
最新收盘价
测试代码
暂停
测试代码
商品期货交易类库
导出函数
处理交易细节
触发
下轨
当前
最新收盘价
测试代码
暂停
测试代码
商品期货交易类库
导出函数
处理交易细节
加仓
多仓状态
触发浮动止盈线
商品期货交易类库
导出函数
处理交易细节
移动中线
空仓状态
触发浮动止盈线
商品期货交易类库
导出函数
处理交易细节
移动中线
平仓
平多
平空
计算
以做多为例
设置当前初始线
入场价
按着一定规则
如
止损线
入场价
浮动止盈线和止损线
可以设置
浮动止盈线
中线
中线
止损线
错误的
参数
错误的
参数
默认为
参数是有效值
传入
即
不为
长度足够
标的物合约信息
账户信息
资金分配
份
一份为
最新价格
调整系数
资金可用部分的
分之一
不足
开
多
空
手合约
手合约需
最新价格
调整系数
份资金
可开
多
空
当前账户资金已小于初始资金可用部分的十分之一
当前资金
初始资金可用部分的十分之一为
资金不足
系数
手合约保证金
资金可用部分不足一手保证金金额
可用部分
手保证金
系数
入口函数
程序的初始化工作
待填写
商品期货交易类库
导出函数
返回一个控制对象
等待交易时间获取账户信息初始化
时间
主循环
程序完成初始化后在此
循环执行
直到手动关闭
时间
已连接服务器
未连接服务器
待显示的一些信息可以写在此处
如账户信息
实时行情
程序状态
暂停
秒
避免轮询频率过高
访问交易所服务器过于频繁导致问题
做一些在程序停止时的
收尾工作
待填写
程序退出
快速迭代量化交易灵感
著作权归作者所有
举报文章
发明者量化
发明者量化
原
量化平台
下载
生成长微博图片
更多分享
使用
快速迭代你的量化交易灵感
上一篇中完成了初步的开仓触发条件设计
有一点小衔接工作没有做完
就是在开仓时需要调用代码中自定义函数
函数
去检查一下当前一份资金是否足够一手保证金金额
并且还要检查一下可用资金部分是否足够开
手
代码中增加一个全局变量
发明者量化
使用
快速迭代你的量化交易灵感
在量化交易的世界
有着千变万化的方法
思路
策略
模型
算法
我们可以天马行空的想象
比如我也是经常头脑风暴般的闪出灵感
迅速在手边能找到的任何可以记录信息的东西上写下
当然这些想法贯穿了很多学科或者领域如
博弈论
统计学
哲学
金融
经济学
数学
物理学等等
有些是我们
发明者量化
蓝弘兵
技术篇
谈止损
深度好文
值得一读
导语
成功没有捷径
唯一的捷径就是不走弯路
保持关注公众号
蓝弘兵实盘分析
让你不走弯路
以最快速度成为股市老兵
也叫
割肉
是指当某一投资出现的亏损达到预定数额时
及时斩仓出局
以避免形成
更大的亏损
其目的就在于投资失误时把损失限定在较小的范围内
股票投资与赌
博
蓝弘兵实盘分析
二十二款知名外汇
测试笔记
最近一个多月
又研究
测试了一些
这些
有的很知名
有的名气小一些
我选择的条件有两个
一是可以开仓回测
二是原代码可读
那些用
破解的
原代码编程了一堆没有意义的代码
解读起来很难
我就暂时放到一边
目前国内对
的研究
开发和破译者很少
我
汇市杂谈
明确方向
第
课
第
天
第
次上课
时间
年
月
日
上午
上课内容
重点
要明确方向
致良知
致良知
致力于不虑而知的清醒状态
清晰对良知的认知和体悟良知的状态
一
认识万物的存在状态
万物的存在状态
有和空
无
有
万物
看得见的
看不见的
摸得着的
绿兔子
生活原本很复杂
因为要活着所要具备的因素太多
要过得有价值更加需要技巧
何况人的一生中还有家人
认清生活的不易
才能珍惜得到的快乐
即便是短暂的
在西高新买房人都会看的金地西沣公元
房脉网高新看房
有句谣传说
个看西高新的客户
个看西沣公元
弄得像是没看过西沣公元就在高新买房的客户
看他们就像看外星人一样稀奇
房脉网专注于西安看房
看透楼盘的所有信息
加房小脉
微信
了解更多房产内容
一直对金地项目象征青春的坚果公寓比较感兴趣
带着一肚子的
房脉网看房