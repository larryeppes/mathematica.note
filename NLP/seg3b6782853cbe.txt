学习
服务注册与发现
字数
学习
服务注册与发现
简介
是一个基于
实现的云应用开发工具
它为基于
的云应用开发中的配置管理
服务发现
断路器
智能路由
微代理
控制总线
全局锁
决策竞选
分布式会话和集群状态管理等操作提供了一种简单的开发方式
包含了多个子项目
针对分布式系统中涉及的多个不同开源产品
比如
等项目
微服务架构
微服务架构
在这几年非常的火热
以至于关于微服务架构相关的产品社区也变得越来越活跃
比如
也因
社区的强大知名度和影响力也被广大架构师与开发者备受关注
那么什么是
微服务架构
呢
简单的说
微服务架构就是将一个完整的应用从数据存储开始垂直拆分成多个不同的服务
每个服务都能独立部署
独立维护
独立扩展
服务与服务间通过诸如
的方式互相调用
对于
微服务架构
大家在互联网可以搜索到很多相关的介绍和研究文章来进行学习和了解
也可以阅读始祖
的
本文不做更多的介绍和描述
服务注册与发现
在简单介绍了
和微服务架构之后
下面回归本文的主旨内容
如何使用
搭建服务注册与发现模块
这里我们会用到
该项目是
的子项目之一
主要内容是对
公司一系列开源产品的包装
它为
应用提供了自配置的
整合
通过一些简单的注解
开发者就可以快速的在应用中配置一下常用模块并构建庞大的分布式系统
它主要提供的模块包括
服务发现
断路器
智能路有
客户端负载均衡
等
所以
我们这里的核心内容就是服务发现模块
简介
是
开发的
一个基于
服务的
服务注册与发现的组件
它主要包括两个组件
和
一个
客户端
用于简化与
的交互
通常就是微服务中的客户端和服务端
提供服务注册和发现的能力
通常就是微服务中的注册中心
各个微服务启动时
会通过
向
注册自己
会存储该服务的信息
也就是说
每个微服务的客户端和服务端
都会注册到
这就衍生出了微服务相互识别的话题
同步
每个
同时也是
逻辑上的
多个
之间通过复制的方式完成服务注册表的同步
形成
的高可用
识别
会缓存
中的信息
即使所有
节点都宕掉
服务消费者仍可使用缓存中的信息找到服务提供者
笔者已亲测
续约
微服务会周期性
默认
地向
发送心跳以
续约
自己的信息
类似于
续期
会定期
默认
执行一次失效服务检测功能
它会检查超过一定时间
默认
没有
的微服务
发现则会注销该微服务节点
已经把
集成在其子项目
里面
关于
配置的最佳实践
可参考
更多介绍
可参考
下面我们动手来做一些尝试
创建
服务注册中心
创建一个基础的
工程
工程目录如下
并在
中引入需要的依赖内容
通过
注解启动一个服务注册中心提供给其他应用进行对话
这一步非常的简单
只需要在一个普通的
应用中添加这个注解就能开启此功能
比如下面的例子
在默认设置下
该服务注册中心也会将自己作为客户端来尝试注册它自己
所以我们需要禁用它的客户端注册行为
只需要在
中问增加如下配置
设置是否从注册中心获取注册信息
缺省
因为这是一个单点的
不需要同步其他
节点的数据
故设为
设置是否将自己作为客户端注册到注册中心
缺省
这里为不需要
查看
注解的源码
会发现它间接用到了
在未设置
的情况下
注册中心在本例中的默认地址就是
但奇怪的是
启动注册中心时
控制台还是会打印这个地址的节点
而实际服务端注册时
要使用
端口的才能注册成功
端口的会注册失败并报告异常
说法不正确
打印信息如下
实际测试
若修改尾部的
为其他的
比如
注册中心启动没有问题
但服务端在注册时会失败
报告异常
为了与后续要进行注册的服务区分
这里将服务注册中心的端口通过
属性设置为
启动工程后
访问
可以看到下面的页面
其中还没有发现任何服务
创建
服务提供方
下面我们创建提供服务的客户端
并向服务注册中心注册自己
假设我们有一个提供计算功能的微服务模块
我们实现一个
通过传入两个参数
和
最后返回
的结果
首先
创建一个基本的
应用
在
中
加入如下配置
其次
实现
请求处理接口
通过
对象
在日志中打印出服务实例的相关内容
最后在主类中通过加上
注解
该注解能激活
中的
实现
才能实现
中对服务信息的输出
我们在完成了服务内容的实现之后
再继续对
做一些配置工作
具体如下
通过
属性
我们可以指定微服务的名称后续在调用的时候只需要使用该名称就可以进行服务的访问
属性对应服务注册中心的配置内容
指定服务注册中心的位置
为了在本机上测试区分服务提供方和服务注册中心
使用
属性设置不同的端口
启动该工程后
再次访问
可以看到
我们定义的服务被注册了
验证
由于发布的微服务所暴露出去的都是
的接口
所以验证的话
可以在浏览器访问下面的地址
目前为止
我们完成了
搭建注册中心的基本示例
不过也只是尝尝鲜
因为它还存在着很多问题
比如
什么是自我保护模式
服务提供方关闭之后
在注册中心看到的状态还是
注册中心的服务提供方显示的名字
是不是可以自定义
等等吧
这些问题
请参见
进阶篇
参考
的配置文件
设置是否从注册中心获取注册信息
缺省
因为这是一个单点的
不需要同步其他
节点的数据
故设为
设置是否将自己作为客户端注册到注册中心
缺省
这里为不需要
查看
注解的源码
会发现它间接用到了
在未设置
的情况下
注册中心在本例中的默认地址就是
但奇怪的是
启动注册中心时
控制台还是会打印这个地址的节点
而实际服务端注册时
要使用
端口的才能注册成功
端口的会注册失败并报告异常
说法不正确
实际测试
若修改尾部的
为其他的
比如
注册中心启动没有问题
但服务端在注册时会失败
报告异常
关闭自我保护模式
缺省为打开
续期时间
即扫描失败服务的间隔时间
缺省为
配置文件
指定发布的微服务名
以后调用时
只需该名称即可访问该服务
指定服务注册中心的地址
修改显示的微服务名为
端口
设置微服务调用地址为
优先
缺省为
心跳时间
即服务续约间隔时间
缺省为
发呆时间
即服务续约到期时间
缺省为
开启健康检查
依赖
文件
日记本
著作权归作者所有
举报文章
和一些做技术的朋友建了一个大数据
机器学习的
群
有
的大佬
欢迎加入
交流
群
下载
生成长微博图片
更多分享
为开发人员提供了快速构建分布式系统中一些常见模式的工具
例如配置管理
服务发现
断路器
智能路由
微代理
控制总线
分布式系统的协调导致了样板模式
使用
开发人员可以快速地支持实现这些模式的服务和应用程序
他们将在任何分布式
卡卡罗
构建微服务架构之九
消息总线
本文参考了
问题
如何实现对配置信息的实时更新
虽然
我们已经能够通过
接口和
仓库的
参考指南
参考指南
介绍
转载自
带目录浏览地址
毛宇鹏
之服务注册与发现
在开始前
先阐明几个概念
其次
基于
需要有一定
的基础
什么是微服务
在大师
的
中有这样说到
服务发现配置
本篇主要介绍
的组件配置
包括
等
我们都知道
的服务发现一个三个角色
详细请见服务发现
如下图
接下来我们按照这三个角色来介绍
的组件配置
本篇介绍的配置基于
谦小易
癌症也是可以治疗的
请看这里
如上所述
癌症也是因为营养素极度缺乏造成的
所以癌症患者用营养素治疗这一方向是正确的
癌症患者用营养素有两种不同的境界
一种境界就是支持治疗
目前
癌的治疗方法基本上还是三种
即手术
放疗和化疗
手术仍然是首选
手术前
术后使用营养素
会大大缩短手术创伤愈合的时间
最大限
魅力人生
家长会演讲稿之感恩
大家好
我是孙
的妈妈
今天
站在这儿给大家分享我的育儿经
我感到很荣幸
感谢叶老师
给我这个机会
我给这次的分享起了一个小题目
叫做
感恩
我家儿子属于好动
调皮型的孩子
做作业的时候
自然也不听话
事儿特别多
一会儿喝水
一会儿尿尿
一会儿吸墨水
一会儿吃苹果
反
桥上风景
月
日
星期三
晴
篇
女儿去夏令营三天了
每天空闲的时候就是我看视频的时间
虽然思女心切
但看着女儿每一次的成长和蜕变
都是值得的
每每看到女儿挑战成功瞬间
我都按耐不住内心的激动
看到女儿和那么多的小朋友一起吃喝玩乐
一起训练学习
行程安排的即精彩又丰富
看到女儿的进步
真心为女儿喝彩
崔嘉诺
英语不好的家长如何教孩子学英语
得到
魏的家庭教育宝典
月
日至
日
英语不好的家长如何给孩子教英语最有效
孩子学外语多大最合适
孩子学外语不怕早
你不用担心学了外语
他中文就说不好了
学外语
早比晚好
不管你的孩子多大
现在开始学就合适
孩子如何学英语最有效
真人互动
花药
投资的刚需是避险还是冒险
今天看的文章是讲
投资的刚需是避险
也冲破了我们在脑海中的传统观念
要有冒险精神
是我们从小就耳濡目染的
要做一个勇敢的人
而最近学的财务管理中也说
风险与报酬成正比
但笑来老师用他买比特币的亲身经历告诉了我们
投资的刚需是避险
对待
冒险
这个词
要分为两个视角来看